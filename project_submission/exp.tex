%\section{Experiment Setup}

%We will begin by measuring the baseline traffic from the smart speaker in a silent environment. This should allow us to identify the regular traffic patterns of the smart speaker when it is not transmitting voice data. %We will then test several basic pre-recorded commands with the smart speaker to identify the basic traffic signature of the speaker when it is transmitting voice data.
%
%Once we have baseline traffic patterns we will begin more detailed measurements. We will test pre-recorded commands of varying lengths many times, to establish correlations between recording length and traffic speed and/or duration. We will then repeat these tests in the presence of several different forms of background noise, including at least podcasts, music, and discussion among ourselves. %We will not perform any tests in public environments to avoid any possible ethical considerations.
%
%To determine how the speaker decides to terminate its recording, we will use several different pathological commands. We will use incomplete commands, very long commands, and commands spoken very unclearly. By correlating the traffic patterns of these commands to the more normal commands previously measured, we hope to calculate the rough length of time the recording lasts.
%
%We will obtain whatever information we can from the cloud (e.g. through an app or API) to compare such information to our traffic pattern analysis and determine whether they match within whatever margin of error we can achieve. We will also test the behavior of the speaker in noisy environments without any commands being given to determine the rate of false recordings.
%
%\subsection{Devices}
%Our main device for testing will be the Amazon Echo, as it is the most popular smart speaker.
%
%If available, we would also like to test the Apple HomePod, as Apple places a much greater emphasis on security and privacy than its competitors.

\section{Experiment}

We ran some experiments on Alexa and using wireshark to see whether Alexa recorded consumer's voice more than we supposed they do. We then compared the size of package of each experiment to give out our results.

\subsection{Environment Set Up}

In order to catch the package that was sent out by Alexa to Amazon cloud, we use set up a hotspot from our server and let Alexa connected to it. In the meanwhile, we play a voice and record the time when Alexa replied our command. Further, we use wireshark to record all the package that going through the hotspot which is connected by Alexa. 

We did the experiment overnight in the office, to make sure there were no voice generated by person and all the thing Alexa might record was the voice played by our code.

\subsection{Baseline Experiment}

In the baseline experiment, we kept Alexa in the office overnight without doing anything and catch all the package that sent out by Alexa.

In this part, we assume that Alexa will not transfer any voice message to the cloud as there were no voice except some noise generated by nature. Therefore, we could use the package that were caught up in this experiment to be the baseline, who were the "necessary" package that Alexa communicate with cloud server. And we assume them to be unsuspicious package, which including some handshake package and broadcasting package to let the Alexa confirm which server to use.

\subsection{"Prefix" Experiment}

In this part, we did two different kinds of experiments. First, we played a voice with a 9 seconds prefix sentence and then followed by a 2.5 seconds command to wake Alexa up and let it transmit the package and answer. The prefix sentence is a random sentence that simulates a person talking in his daily life, and then he asked Alexa a question. The whole prefix sentence is: " I think I am having some trouble hearing what people trying to say to me. I am not feeling particularly well now. I am also thinking switching a new job." And the command is: "Alexa, where is New York City." It is really common in our daily life that people just having some conversation and suddenly find something to deal with, therefore they send a command to Alexa.

Here, we let Alexa to start transmitting the voice to the server. As Amazon has mentioned in his document [1]: "By default, Alexa-enabled devices only stream audio to the cloud if the wake word is detected (or Alexa is activated by pressing a button)." it will not transmit any data before the wake up word. Our assumption is that, if Alexa truly did the transmission as it mention, the size of each transmission package should be the same, as there is only a short command at the end of the sentence. However, if the optimization algorithm of Alexa is not efficient enough, it might transmit some parts of the prefix sentence to the cloud and the package size would wave whole night.

In order to make our results more significant, we did another comparision experiment. We played a voice with full prefix sentence mentioned above and a voice with no prefix sentence but just command for Alexa. And if Alexa did try some part of the prefix sentence, the package size of these two parts would show up a significant difference.

\subsection{"Postfix" Experiment}
  
Moreover, we want to measure whether Alexa will keep transmitting package even if Alexa has noticed the whole command and started replying. The assumption here is that, as Alexa has started replying, it means Alexa has fully recognized the whole command and it should not transmit the rest of the sentence onto the server. It fits our real life situation that someone sends a command to Alexa and starts another conversation with others immediately. If Alexa transmits the rest of the conversation, it would definitely rises the privacy concern.

Here, we use "Alexa, where is New York City" as a command sentence and adds a 1 second postfix sentence. We gave an approximately 0.5 seconds gap between the command and postfix sentence to make sure that Alexa has recognized the whole command and started to reply. Then we started playing three different kinds of sentences which are: a) command voice b) command voice with 0.5 second postfix sentence and c) command voice with 1 second postfix sentence. And analyze the package sent out by Alexa.

What's more, we want to see whether that 0.5 second pause is necessary for Alexa to realize the command is over and play the command with postfix sentence immediately. We try to find out whether Alexa would automatically cut off the voice once it recognized the following sentence is meaningless. We played command with 0,1,2,3,4,5,6 seconds postfix sentence, which contains nonsense sentences, to see whether Alexa would cut off the transmission itself.

Further, we try to figure out what is the long enough pause for Alexa to cut off the voice transmission and recognize the whole sentence. We played the command with different pause before playing the whole postfix sentence, to figure out when Alexa would reply a right answer to our command. Here we tried the voice gap between command and postfix sentence with 0.2,0.3,0.4,0.5 seconds.

\subsection{"Stop" Experiment}

Following up the above experiment, in this part, we would like to detect how Alexa detects the end of a command. We would like to see whether Alexa stopped because of silence or something else.

We tried three experiment here: a) We played a background music while playing the command voice and kept playing for a while to see whether Alexa would stop transmitting package and start replying to the command. This experiment can help us figure out whether Alexa will keep recording once they detect some sounds. b) Playing the command voice with a background conversation simulates the situation in our real life. For example, in our family, when father asks something to Alexa, in the meanwhile, mother is talking something to the child. Father's voice is louder however the conversation between mother and child will keep going after father finish his command. Therefore, we would like to figure out whether Alexa can detect this situation automatically. c) We start talking immediately after the wake up world and keep talking for a while without stopping to simulate a situation that in a party there is some conversation happens around Alexa. And we want to figure out whether Alexa would stop recording automatically or will keep recording all of the sentence.



